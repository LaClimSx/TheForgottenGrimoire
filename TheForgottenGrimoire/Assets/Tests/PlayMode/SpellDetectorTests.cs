using System;
using System.Collections.Generic;
using System.Globalization;
using System.Text.RegularExpressions;
using NUnit.Framework;
using spells;
using UnityEngine;
using static spells.SpellDetector;
using static spells.SpellDetector.SpellType;


public static class Vector3Parser
{
    public static List<Vector3> ParseVector3List(string input)
    {
        List<Vector3> points = new List<Vector3>();

        // Match pattern like: (-1.00, 5.36, -15.46)
        string pattern = @"\((-?\d+\.?\d*),\s*(-?\d+\.?\d*),\s*(-?\d+\.?\d*)\)";
        MatchCollection matches = Regex.Matches(input, pattern);

        foreach (Match match in matches)
        {
            if (match.Groups.Count == 4)
            {
                float x = float.Parse(match.Groups[1].Value, CultureInfo.InvariantCulture);
                float y = float.Parse(match.Groups[2].Value, CultureInfo.InvariantCulture);
                float z = float.Parse(match.Groups[3].Value, CultureInfo.InvariantCulture);

                points.Add(new Vector3(x, y, z));
            }
        }

        return points;
    }
}

namespace Tests.EditMode
{
    public class SpellDetectorTests
    {
        [Test]
        public void DetectSpell_HumanLabeledData()
        {
            // Arrange
            var detector = new SpellDetector();
            var eclair = Vector3Parser.ParseVector3List(
                "(0.46, 5.21, -22.66), (0.47, 5.20, -22.66), (0.47, 5.20, -22.65), (0.47, 5.19, -22.64), (0.48, 5.18, -22.62), (0.48, 5.16, -22.58), (0.48, 5.14, -22.53), (0.48, 5.13, -22.50), (0.48, 5.11, -22.47), (0.48, 5.10, -22.45), (0.47, 5.09, -22.43), (0.47, 5.07, -22.40), (0.47, 5.04, -22.37), (0.48, 5.01, -22.33), (0.48, 4.99, -22.30), (0.47, 4.97, -22.27), (0.47, 4.94, -22.25), (0.47, 4.92, -22.23), (0.47, 4.89, -22.20), (0.46, 4.86, -22.17), (0.46, 4.83, -22.15), (0.46, 4.80, -22.13), (0.46, 4.78, -22.12), (0.45, 4.75, -22.10), (0.44, 4.73, -22.08), (0.44, 4.71, -22.07), (0.43, 4.69, -22.06), (0.43, 4.66, -22.04), (0.42, 4.63, -22.03), (0.42, 4.62, -22.02), (0.41, 4.60, -22.01), (0.41, 4.59, -22.01), (0.40, 4.57, -22.00), (0.39, 4.55, -21.98), (0.38, 4.53, -21.98), (0.38, 4.52, -21.97), (0.38, 4.51, -21.97), (0.37, 4.50, -21.97), (0.37, 4.51, -21.97), (0.37, 4.51, -21.97), (0.38, 4.52, -21.98), (0.40, 4.52, -21.99), (0.41, 4.53, -22.00), (0.42, 4.54, -22.01), (0.44, 4.54, -22.03), (0.44, 4.55, -22.04), (0.46, 4.56, -22.05), (0.48, 4.57, -22.08), (0.50, 4.59, -22.10), (0.52, 4.60, -22.12), (0.54, 4.62, -22.15), (0.57, 4.63, -22.19), (0.58, 4.65, -22.21), (0.61, 4.67, -22.25), (0.63, 4.68, -22.28), (0.65, 4.69, -22.32), (0.66, 4.71, -22.35), (0.67, 4.73, -22.39), (0.68, 4.75, -22.42), (0.69, 4.76, -22.45), (0.70, 4.77, -22.48), (0.71, 4.78, -22.50), (0.71, 4.78, -22.52), (0.72, 4.79, -22.54), (0.72, 4.79, -22.56), (0.72, 4.80, -22.58), (0.72, 4.80, -22.59), (0.72, 4.81, -22.60), (0.73, 4.80, -22.60), (0.73, 4.78, -22.60), (0.73, 4.78, -22.59), (0.73, 4.77, -22.58), (0.73, 4.76, -22.58), (0.73, 4.75, -22.57), (0.73, 4.74, -22.56), (0.73, 4.73, -22.55), (0.73, 4.71, -22.54), (0.73, 4.70, -22.52), (0.73, 4.68, -22.51), (0.73, 4.66, -22.49), (0.72, 4.62, -22.45), (0.72, 4.58, -22.42), (0.71, 4.54, -22.38), (0.69, 4.48, -22.34), (0.68, 4.43, -22.32), (0.67, 4.40, -22.29), (0.65, 4.36, -22.27), (0.63, 4.31, -22.25), (0.61, 4.26, -22.22), (0.58, 4.20, -22.20), (0.56, 4.16, -22.19), (0.54, 4.12, -22.18), (0.53, 4.09, -22.18), (0.52, 4.08, -22.18), (0.51, 4.04, -22.18), (0.48, 4.00, -22.16), (0.46, 3.98, -22.16), (0.46, 3.98, -22.16), (0.46, 3.98, -22.16), (0.45, 3.97, -22.15), (0.43, 3.95, -22.15), (0.42, 3.94, -22.14), (0.42, 3.94, -22.15), (0.43, 3.95, -22.15), (0.43, 3.96, -22.15), (0.43, 3.97, -22.15), (0.44, 3.98, -22.15), (0.45, 3.99, -22.15), (0.46, 4.00, -22.15), (0.46, 4.01, -22.15), (0.47, 4.02, -22.16), (0.47, 4.03, -22.15),");
            var triangle = Vector3Parser.ParseVector3List(
                "(-1.61, 4.36, -19.35), (-1.62, 4.37, -19.35), (-1.63, 4.37, -19.35), (-1.62, 4.39, -19.35), (-1.61, 4.41, -19.35), (-1.59, 4.44, -19.35), (-1.57, 4.47, -19.35), (-1.55, 4.49, -19.35), (-1.53, 4.52, -19.36), (-1.51, 4.56, -19.36), (-1.49, 4.59, -19.37), (-1.47, 4.63, -19.37), (-1.44, 4.67, -19.38), (-1.41, 4.71, -19.40), (-1.39, 4.75, -19.41), (-1.37, 4.79, -19.43), (-1.35, 4.83, -19.45), (-1.33, 4.86, -19.46), (-1.31, 4.90, -19.48), (-1.28, 4.93, -19.51), (-1.27, 4.96, -19.53), (-1.26, 4.98, -19.54), (-1.25, 5.01, -19.57), (-1.24, 5.05, -19.60), (-1.24, 5.08, -19.63), (-1.21, 5.10, -19.65), (-1.18, 5.11, -19.66), (-1.18, 5.12, -19.67), (-1.18, 5.13, -19.69), (-1.18, 5.15, -19.71), (-1.18, 5.17, -19.73), (-1.18, 5.18, -19.75), (-1.16, 5.19, -19.76), (-1.14, 5.18, -19.76), (-1.15, 5.18, -19.76), (-1.16, 5.18, -19.75), (-1.15, 5.17, -19.75), (-1.15, 5.16, -19.74), (-1.15, 5.15, -19.73), (-1.15, 5.13, -19.72), (-1.15, 5.12, -19.72), (-1.14, 5.11, -19.71), (-1.13, 5.09, -19.70), (-1.12, 5.07, -19.69), (-1.12, 5.04, -19.67), (-1.12, 5.01, -19.64), (-1.12, 4.98, -19.62), (-1.11, 4.94, -19.61), (-1.10, 4.91, -19.60), (-1.09, 4.88, -19.59), (-1.08, 4.84, -19.57), (-1.07, 4.79, -19.56), (-1.06, 4.75, -19.54), (-1.05, 4.69, -19.53), (-1.04, 4.64, -19.52), (-1.03, 4.60, -19.51), (-1.02, 4.56, -19.51), (-1.01, 4.52, -19.51), (-1.02, 4.47, -19.51), (-1.02, 4.42, -19.50), (-1.01, 4.37, -19.50), (-1.00, 4.34, -19.51), (-1.00, 4.32, -19.52), (-0.99, 4.30, -19.52), (-1.00, 4.28, -19.52), (-1.00, 4.25, -19.52), (-1.00, 4.24, -19.53), (-0.98, 4.23, -19.54), (-0.97, 4.23, -19.55), (-0.98, 4.21, -19.55), (-0.99, 4.20, -19.54), (-0.99, 4.20, -19.54), (-1.00, 4.20, -19.53), (-1.01, 4.20, -19.53), (-1.02, 4.21, -19.52), (-1.04, 4.22, -19.52), (-1.04, 4.23, -19.51), (-1.05, 4.25, -19.51), (-1.06, 4.26, -19.50), (-1.08, 4.28, -19.49), (-1.10, 4.30, -19.48), (-1.13, 4.31, -19.47), (-1.15, 4.33, -19.46), (-1.16, 4.34, -19.45), (-1.18, 4.35, -19.45), (-1.21, 4.35, -19.44), (-1.25, 4.36, -19.43), (-1.28, 4.36, -19.42), (-1.31, 4.36, -19.41), (-1.34, 4.36, -19.41), (-1.36, 4.36, -19.40), (-1.39, 4.35, -19.40), (-1.42, 4.35, -19.39), (-1.45, 4.35, -19.39), (-1.48, 4.35, -19.39), (-1.50, 4.35, -19.39), (-1.51, 4.35, -19.39), (-1.53, 4.35, -19.39), (-1.55, 4.35, -19.39), (-1.57, 4.34, -19.38), (-1.60, 4.33, -19.38), (-1.62, 4.32, -19.38),");
            var triangle2 = Vector3Parser.ParseVector3List(
                "(-3.21, 4.30, -20.44), (-3.21, 4.28, -20.44), (-3.21, 4.27, -20.43), (-3.21, 4.28, -20.43), (-3.20, 4.29, -20.43), (-3.19, 4.30, -20.42), (-3.18, 4.32, -20.42), (-3.17, 4.35, -20.42), (-3.16, 4.37, -20.42), (-3.15, 4.40, -20.42), (-3.14, 4.44, -20.43), (-3.13, 4.47, -20.43), (-3.12, 4.51, -20.43), (-3.11, 4.54, -20.44), (-3.10, 4.58, -20.45), (-3.09, 4.62, -20.46), (-3.07, 4.67, -20.48), (-3.06, 4.72, -20.49), (-3.04, 4.76, -20.51), (-3.02, 4.80, -20.53), (-3.01, 4.84, -20.55), (-3.00, 4.87, -20.57), (-2.99, 4.91, -20.60), (-2.98, 4.95, -20.63), (-2.97, 4.99, -20.66), (-2.96, 5.02, -20.68), (-2.94, 5.03, -20.70), (-2.92, 5.05, -20.71), (-2.92, 5.06, -20.72), (-2.92, 5.08, -20.74), (-2.92, 5.10, -20.77), (-2.92, 5.12, -20.79), (-2.92, 5.14, -20.81), (-2.92, 5.15, -20.82), (-2.91, 5.16, -20.83), (-2.92, 5.17, -20.84), (-2.92, 5.18, -20.85), (-2.92, 5.19, -20.87), (-2.92, 5.19, -20.87), (-2.91, 5.19, -20.88), (-2.90, 5.19, -20.87), (-2.90, 5.18, -20.87), (-2.90, 5.17, -20.85), (-2.90, 5.16, -20.84), (-2.89, 5.15, -20.83), (-2.89, 5.14, -20.82), (-2.89, 5.13, -20.81), (-2.88, 5.11, -20.80), (-2.87, 5.09, -20.78), (-2.87, 5.08, -20.77), (-2.86, 5.06, -20.76), (-2.85, 5.03, -20.74), (-2.84, 5.01, -20.72), (-2.83, 4.98, -20.71), (-2.82, 4.96, -20.69), (-2.81, 4.94, -20.69), (-2.79, 4.91, -20.68), (-2.78, 4.89, -20.67), (-2.76, 4.85, -20.65), (-2.75, 4.81, -20.63), (-2.75, 4.78, -20.62), (-2.74, 4.75, -20.61), (-2.72, 4.72, -20.61), (-2.69, 4.69, -20.61), (-2.68, 4.65, -20.61), (-2.67, 4.62, -20.60), (-2.67, 4.58, -20.59), (-2.66, 4.54, -20.59), (-2.64, 4.49, -20.59), (-2.63, 4.45, -20.59), (-2.62, 4.42, -20.59), (-2.61, 4.39, -20.59), (-2.60, 4.37, -20.60), (-2.59, 4.33, -20.60), (-2.59, 4.29, -20.60), (-2.60, 4.27, -20.60), (-2.59, 4.24, -20.60), (-2.58, 4.23, -20.61), (-2.58, 4.22, -20.62), (-2.59, 4.20, -20.62), (-2.61, 4.18, -20.61), (-2.61, 4.17, -20.61), (-2.60, 4.16, -20.61), (-2.59, 4.16, -20.62), (-2.59, 4.17, -20.62), (-2.60, 4.17, -20.62), (-2.61, 4.18, -20.61), (-2.62, 4.19, -20.61), (-2.62, 4.20, -20.60), (-2.62, 4.22, -20.60), (-2.63, 4.23, -20.60), (-2.64, 4.25, -20.59), (-2.65, 4.26, -20.59), (-2.66, 4.27, -20.58), (-2.68, 4.28, -20.57), (-2.69, 4.29, -20.57), (-2.70, 4.30, -20.56), (-2.72, 4.31, -20.55), (-2.74, 4.31, -20.54), (-2.76, 4.32, -20.53), (-2.80, 4.32, -20.52), (-2.82, 4.33, -20.52), (-2.84, 4.33, -20.51), (-2.87, 4.33, -20.50), (-2.89, 4.33, -20.50), (-2.92, 4.33, -20.49), (-2.95, 4.32, -20.48), (-2.98, 4.32, -20.48), (-3.00, 4.32, -20.48), (-3.02, 4.31, -20.47), (-3.04, 4.31, -20.47), (-3.06, 4.31, -20.47), (-3.08, 4.31, -20.47), (-3.10, 4.31, -20.47), (-3.11, 4.31, -20.47), (-3.13, 4.31, -20.47), (-3.14, 4.31, -20.46), (-3.15, 4.31, -20.46), (-3.16, 4.31, -20.46), (-3.17, 4.31, -20.46), (-3.18, 4.31, -20.46), (-3.17, 4.31, -20.46),");
            var infinity = Vector3Parser.ParseVector3List(
                "(-2.12, 4.81, -11.79), (-2.12, 4.80, -11.79), (-2.13, 4.79, -11.79), (-2.13, 4.79, -11.79), (-2.13, 4.77, -11.78), (-2.14, 4.76, -11.78), (-2.14, 4.75, -11.78), (-2.14, 4.75, -11.78), (-2.14, 4.74, -11.78), (-2.14, 4.72, -11.78), (-2.13, 4.71, -11.77), (-2.13, 4.70, -11.77), (-2.13, 4.69, -11.77), (-2.13, 4.68, -11.77), (-2.13, 4.67, -11.77), (-2.13, 4.65, -11.76), (-2.12, 4.64, -11.76), (-2.11, 4.63, -11.76), (-2.10, 4.62, -11.76), (-2.10, 4.60, -11.75), (-2.10, 4.59, -11.75), (-2.10, 4.57, -11.75), (-2.10, 4.56, -11.75), (-2.09, 4.55, -11.75), (-2.08, 4.55, -11.74), (-2.08, 4.54, -11.74), (-2.07, 4.53, -11.74), (-2.06, 4.52, -11.74), (-2.06, 4.51, -11.74), (-2.05, 4.50, -11.74), (-2.05, 4.49, -11.74), (-2.04, 4.48, -11.74), (-2.03, 4.47, -11.74), (-2.03, 4.46, -11.74), (-2.02, 4.45, -11.74), (-2.01, 4.44, -11.74), (-2.00, 4.43, -11.74), (-2.00, 4.42, -11.74), (-1.99, 4.41, -11.74), (-1.98, 4.41, -11.74), (-1.97, 4.41, -11.74), (-1.96, 4.40, -11.74), (-1.95, 4.40, -11.74), (-1.94, 4.40, -11.74), (-1.93, 4.40, -11.74), (-1.92, 4.41, -11.74), (-1.91, 4.41, -11.74), (-1.90, 4.41, -11.74), (-1.89, 4.42, -11.74), (-1.87, 4.43, -11.74), (-1.86, 4.45, -11.74), (-1.85, 4.46, -11.74), (-1.85, 4.48, -11.74), (-1.84, 4.51, -11.74), (-1.83, 4.53, -11.75), (-1.82, 4.55, -11.75), (-1.81, 4.57, -11.75), (-1.80, 4.59, -11.75), (-1.80, 4.61, -11.76), (-1.79, 4.64, -11.76), (-1.78, 4.66, -11.77), (-1.77, 4.69, -11.77), (-1.76, 4.72, -11.78), (-1.75, 4.74, -11.79), (-1.74, 4.76, -11.79), (-1.73, 4.78, -11.80), (-1.72, 4.79, -11.80), (-1.71, 4.81, -11.81), (-1.70, 4.82, -11.81), (-1.69, 4.84, -11.82), (-1.68, 4.86, -11.83), (-1.67, 4.87, -11.84), (-1.66, 4.88, -11.84), (-1.65, 4.89, -11.85), (-1.64, 4.90, -11.86), (-1.63, 4.92, -11.87), (-1.62, 4.93, -11.88), (-1.61, 4.95, -11.88), (-1.60, 4.96, -11.89), (-1.58, 4.96, -11.90), (-1.57, 4.97, -11.90), (-1.56, 4.97, -11.91), (-1.55, 4.98, -11.92), (-1.54, 4.98, -11.92), (-1.52, 4.99, -11.93), (-1.51, 4.99, -11.94), (-1.49, 4.99, -11.94), (-1.48, 4.99, -11.95), (-1.46, 4.99, -11.96), (-1.45, 4.98, -11.96), (-1.44, 4.98, -11.96), (-1.42, 4.97, -11.96), (-1.41, 4.96, -11.97), (-1.39, 4.94, -11.96), (-1.38, 4.93, -11.96), (-1.36, 4.91, -11.96), (-1.34, 4.90, -11.96), (-1.33, 4.88, -11.97), (-1.32, 4.86, -11.97), (-1.30, 4.84, -11.96), (-1.29, 4.82, -11.96), (-1.28, 4.80, -11.96), (-1.27, 4.78, -11.96), (-1.27, 4.76, -11.96), (-1.26, 4.74, -11.96), (-1.25, 4.71, -11.96), (-1.25, 4.69, -11.95), (-1.24, 4.66, -11.95), (-1.24, 4.64, -11.95), (-1.24, 4.62, -11.94), (-1.24, 4.60, -11.94), (-1.25, 4.58, -11.94), (-1.26, 4.55, -11.93), (-1.26, 4.53, -11.93), (-1.27, 4.51, -11.92), (-1.28, 4.49, -11.92), (-1.29, 4.47, -11.91), (-1.30, 4.45, -11.91), (-1.31, 4.43, -11.90), (-1.33, 4.42, -11.90), (-1.34, 4.40, -11.89), (-1.36, 4.40, -11.88), (-1.37, 4.39, -11.88), (-1.39, 4.39, -11.87), (-1.40, 4.39, -11.86), (-1.42, 4.39, -11.86), (-1.44, 4.40, -11.85), (-1.45, 4.40, -11.84), (-1.47, 4.41, -11.84), (-1.49, 4.42, -11.83), (-1.50, 4.44, -11.82), (-1.51, 4.46, -11.82), (-1.53, 4.49, -11.81), (-1.54, 4.51, -11.81), (-1.55, 4.53, -11.80), (-1.57, 4.55, -11.80), (-1.58, 4.57, -11.80), (-1.60, 4.60, -11.79), (-1.61, 4.63, -11.79), (-1.62, 4.65, -11.79), (-1.64, 4.68, -11.80), (-1.66, 4.70, -11.80), (-1.67, 4.73, -11.80), (-1.69, 4.74, -11.80), (-1.71, 4.76, -11.80), (-1.72, 4.78, -11.80), (-1.74, 4.79, -11.81), (-1.75, 4.81, -11.81), (-1.77, 4.83, -11.82), (-1.79, 4.84, -11.82), (-1.80, 4.85, -11.82), (-1.81, 4.86, -11.83), (-1.83, 4.87, -11.83), (-1.85, 4.87, -11.83), (-1.87, 4.88, -11.83), (-1.89, 4.88, -11.84), (-1.90, 4.88, -11.84), (-1.91, 4.89, -11.84), (-1.93, 4.89, -11.84), (-1.94, 4.90, -11.85), (-1.95, 4.90, -11.85), (-1.96, 4.89, -11.85), (-1.99, 4.89, -11.85), (-2.00, 4.88, -11.85), (-2.01, 4.87, -11.85), (-2.02, 4.86, -11.85), (-2.02, 4.85, -11.84), (-2.03, 4.85, -11.84), (-2.04, 4.84, -11.84), (-2.05, 4.83, -11.84), (-2.06, 4.82, -11.84), (-2.06, 4.80, -11.84), (-2.07, 4.78, -11.83), (-2.07, 4.77, -11.83), (-2.08, 4.75, -11.83), (-2.08, 4.74, -11.83), (-2.09, 4.73, -11.83), (-2.09, 4.71, -11.82), (-2.09, 4.70, -11.82), (-2.09, 4.68, -11.82), (-2.09, 4.67, -11.82), (-2.08, 4.69, -11.81), (-2.08, 4.70, -11.82),");
            var infinity2 = Vector3Parser.ParseVector3List(
                "(-0.68, 4.47, -12.85), (-0.67, 4.48, -12.85), (-0.67, 4.48, -12.85), (-0.66, 4.50, -12.85), (-0.66, 4.51, -12.85), (-0.65, 4.52, -12.86), (-0.65, 4.53, -12.86), (-0.65, 4.54, -12.86), (-0.64, 4.55, -12.86), (-0.64, 4.57, -12.87), (-0.63, 4.58, -12.87), (-0.63, 4.60, -12.88), (-0.63, 4.62, -12.89), (-0.62, 4.63, -12.89), (-0.62, 4.65, -12.90), (-0.60, 4.71, -12.93), (-0.60, 4.72, -12.93), (-0.59, 4.73, -12.94), (-0.58, 4.75, -12.95), (-0.58, 4.76, -12.96), (-0.57, 4.78, -12.97), (-0.56, 4.79, -12.98), (-0.56, 4.80, -12.99), (-0.55, 4.81, -13.00), (-0.54, 4.83, -13.01), (-0.53, 4.84, -13.02), (-0.52, 4.85, -13.03), (-0.51, 4.86, -13.05), (-0.51, 4.87, -13.06), (-0.50, 4.88, -13.06), (-0.49, 4.89, -13.07), (-0.48, 4.90, -13.09), (-0.47, 4.91, -13.10), (-0.46, 4.92, -13.12), (-0.45, 4.93, -13.13), (-0.44, 4.93, -13.15), (-0.43, 4.94, -13.16), (-0.42, 4.95, -13.17), (-0.41, 4.95, -13.19), (-0.40, 4.96, -13.20), (-0.39, 4.96, -13.22), (-0.38, 4.97, -13.23), (-0.37, 4.97, -13.25), (-0.36, 4.98, -13.26), (-0.35, 4.98, -13.28), (-0.34, 4.98, -13.29), (-0.33, 4.98, -13.30), (-0.32, 4.98, -13.31), (-0.32, 4.97, -13.31), (-0.31, 4.96, -13.31), (-0.30, 4.95, -13.32), (-0.29, 4.95, -13.33), (-0.28, 4.94, -13.34), (-0.27, 4.93, -13.34), (-0.26, 4.92, -13.35), (-0.25, 4.90, -13.35), (-0.24, 4.89, -13.35), (-0.23, 4.87, -13.36), (-0.22, 4.85, -13.36), (-0.21, 4.84, -13.36), (-0.21, 4.82, -13.37), (-0.20, 4.80, -13.37), (-0.19, 4.78, -13.37), (-0.18, 4.75, -13.36), (-0.18, 4.73, -13.35), (-0.17, 4.71, -13.35), (-0.17, 4.69, -13.35), (-0.17, 4.66, -13.35), (-0.17, 4.64, -13.34), (-0.17, 4.61, -13.33), (-0.17, 4.59, -13.32), (-0.17, 4.56, -13.31), (-0.18, 4.55, -13.31), (-0.18, 4.53, -13.31), (-0.18, 4.52, -13.31), (-0.19, 4.49, -13.29), (-0.20, 4.45, -13.27), (-0.22, 4.42, -13.25), (-0.22, 4.41, -13.25), (-0.23, 4.39, -13.25), (-0.24, 4.37, -13.24), (-0.26, 4.34, -13.21), (-0.28, 4.32, -13.20), (-0.28, 4.31, -13.19), (-0.29, 4.30, -13.19), (-0.30, 4.29, -13.17), (-0.32, 4.27, -13.16), (-0.35, 4.25, -13.14), (-0.36, 4.24, -13.13), (-0.37, 4.25, -13.12), (-0.37, 4.25, -13.11), (-0.39, 4.26, -13.10), (-0.40, 4.26, -13.09), (-0.42, 4.26, -13.07), (-0.43, 4.27, -13.06), (-0.44, 4.29, -13.05), (-0.45, 4.30, -13.04), (-0.46, 4.31, -13.03), (-0.48, 4.32, -13.02), (-0.50, 4.34, -13.01), (-0.51, 4.35, -13.00), (-0.52, 4.37, -12.98), (-0.53, 4.39, -12.98), (-0.54, 4.41, -12.97), (-0.55, 4.44, -12.96), (-0.57, 4.46, -12.95), (-0.58, 4.48, -12.95), (-0.60, 4.50, -12.94), (-0.61, 4.52, -12.93), (-0.62, 4.55, -12.93), (-0.64, 4.57, -12.93), (-0.65, 4.59, -12.92), (-0.66, 4.62, -12.92), (-0.68, 4.64, -12.92), (-0.70, 4.66, -12.92), (-0.71, 4.68, -12.91), (-0.73, 4.70, -12.91), (-0.74, 4.72, -12.91), (-0.76, 4.74, -12.91), (-0.78, 4.76, -12.91), (-0.80, 4.77, -12.91), (-0.81, 4.79, -12.92), (-0.82, 4.81, -12.92), (-0.84, 4.82, -12.92), (-0.86, 4.83, -12.92), (-0.88, 4.84, -12.92), (-0.90, 4.85, -12.92), (-0.91, 4.86, -12.93), (-0.93, 4.87, -12.93), (-0.95, 4.87, -12.93), (-0.97, 4.87, -12.93), (-0.99, 4.87, -12.93), (-1.01, 4.87, -12.93), (-1.03, 4.87, -12.93), (-1.05, 4.86, -12.93), (-1.06, 4.86, -12.93), (-1.08, 4.85, -12.93), (-1.10, 4.83, -12.93), (-1.12, 4.82, -12.92), (-1.14, 4.80, -12.92), (-1.15, 4.79, -12.92), (-1.17, 4.77, -12.92), (-1.19, 4.76, -12.92), (-1.20, 4.74, -12.92), (-1.21, 4.72, -12.92), (-1.22, 4.70, -12.92), (-1.24, 4.69, -12.92), (-1.25, 4.67, -12.92), (-1.26, 4.65, -12.92), (-1.26, 4.63, -12.92), (-1.27, 4.62, -12.92), (-1.28, 4.60, -12.92), (-1.28, 4.58, -12.92), (-1.28, 4.56, -12.91), (-1.28, 4.53, -12.91), (-1.28, 4.50, -12.91), (-1.28, 4.48, -12.91), (-1.27, 4.47, -12.91), (-1.27, 4.45, -12.90), (-1.26, 4.43, -12.90), (-1.25, 4.41, -12.90), (-1.24, 4.38, -12.90), (-1.23, 4.37, -12.89), (-1.21, 4.35, -12.89), (-1.20, 4.34, -12.89), (-1.18, 4.33, -12.89), (-1.17, 4.32, -12.89), (-1.16, 4.30, -12.89), (-1.14, 4.29, -12.89), (-1.12, 4.29, -12.88), (-1.10, 4.28, -12.88), (-1.08, 4.28, -12.88), (-1.06, 4.28, -12.88), (-1.05, 4.28, -12.88), (-1.03, 4.28, -12.88), (-1.01, 4.29, -12.87), (-0.99, 4.30, -12.87), (-0.97, 4.31, -12.87), (-0.94, 4.33, -12.87), (-0.91, 4.36, -12.87), (-0.89, 4.37, -12.87), (-0.87, 4.40, -12.87), (-0.85, 4.42, -12.87), (-0.83, 4.44, -12.87), (-0.81, 4.46, -12.87), (-0.80, 4.48, -12.88), (-0.77, 4.52, -12.88), (-0.75, 4.53, -12.89), (-0.74, 4.55, -12.89), (-0.72, 4.57, -12.90), (-0.71, 4.58, -12.90), (-0.70, 4.59, -12.91), (-0.68, 4.60, -12.91), (-0.67, 4.61, -12.92), (-0.66, 4.62, -12.92), (-0.65, 4.63, -12.93), (-0.65, 4.64, -12.93), (-0.65, 4.63, -12.93), (-0.65, 4.61, -12.93), (-0.64, 4.62, -12.93),");
            // new data
            var spirale = Vector3Parser.ParseVector3List(
                "(0.04, 5.36, -21.68), (-0.01, 5.36, -21.69), (-0.06, 5.37, -21.70), (-0.11, 5.39, -21.72), (-0.15, 5.42, -21.74), (-0.18, 5.46, -21.76), (-0.19, 5.50, -21.78), (-0.19, 5.56, -21.80), (-0.19, 5.61, -21.82), (-0.15, 5.65, -21.82), (-0.10, 5.66, -21.81), (-0.06, 5.66, -21.79), (0.00, 5.65, -21.77), (0.04, 5.65, -21.76), (0.09, 5.63, -21.75), (0.14, 5.61, -21.74), (0.19, 5.59, -21.74), (0.23, 5.55, -21.73), (0.27, 5.50, -21.73), (0.30, 5.46, -21.73), (0.32, 5.41, -21.72), (0.30, 5.34, -21.72), (0.28, 5.28, -21.71), (0.24, 5.25, -21.70), (0.18, 5.22, -21.70), (0.13, 5.21, -21.70), (0.08, 5.19, -21.70), (0.03, 5.18, -21.71), (-0.02, 5.18, -21.72), (-0.08, 5.19, -21.73), (-0.14, 5.19, -21.75), (-0.19, 5.20, -21.77), (-0.24, 5.22, -21.80), (-0.28, 5.24, -21.83), (-0.32, 5.26, -21.86), (-0.36, 5.30, -21.90), (-0.38, 5.33, -21.93), (-0.41, 5.36, -21.96), (-0.43, 5.41, -22.00), (-0.44, 5.45, -22.03), (-0.44, 5.49, -22.06), (-0.43, 5.54, -22.08), (-0.42, 5.59, -22.10), (-0.40, 5.63, -22.10), (-0.37, 5.67, -22.07), (-0.33, 5.70, -22.05), (-0.28, 5.73, -22.01), (-0.24, 5.74, -21.98), (-0.19, 5.76, -21.96), (-0.14, 5.78, -21.93), (-0.08, 5.79, -21.91), (-0.03, 5.79, -21.90), (0.02, 5.79, -21.88), (0.08, 5.79, -21.88), (0.14, 5.80, -21.88), (0.20, 5.79, -21.88), (0.25, 5.77, -21.88), (0.30, 5.76, -21.89), (0.35, 5.74, -21.90), (0.39, 5.71, -21.89), (0.43, 5.66, -21.89), (0.46, 5.62, -21.89), (0.49, 5.57, -21.88), (0.51, 5.52, -21.87), (0.52, 5.46, -21.87), (0.52, 5.41, -21.86), (0.51, 5.36, -21.85), (0.50, 5.31, -21.83), (0.48, 5.25, -21.82), (0.44, 5.21, -21.81), (0.41, 5.16, -21.80), (0.37, 5.12, -21.80), (0.33, 5.09, -21.79), (0.29, 5.06, -21.79), (0.24, 5.04, -21.79), (0.20, 5.02, -21.79), (0.15, 5.01, -21.79),");
            var triangle3 = Vector3Parser.ParseVector3List(
                "(-0.14, 5.38, -21.73), (-0.11, 5.42, -21.72), (-0.08, 5.47, -21.72), (-0.06, 5.52, -21.72), (-0.03, 5.56, -21.73), (-0.02, 5.61, -21.75), (0.00, 5.66, -21.77), (0.02, 5.70, -21.80), (0.04, 5.74, -21.83), (0.06, 5.78, -21.86), (0.07, 5.81, -21.89), (0.09, 5.78, -21.86), (0.12, 5.74, -21.82), (0.15, 5.70, -21.79), (0.19, 5.65, -21.77), (0.23, 5.61, -21.75), (0.26, 5.57, -21.74), (0.30, 5.53, -21.74), (0.33, 5.49, -21.74), (0.36, 5.44, -21.75), (0.38, 5.40, -21.75), (0.41, 5.36, -21.77), (0.39, 5.31, -21.76), (0.35, 5.30, -21.74), (0.30, 5.29, -21.72), (0.25, 5.28, -21.70), (0.19, 5.27, -21.69), (0.15, 5.26, -21.69), (0.09, 5.25, -21.69), (0.04, 5.25, -21.69), (-0.02, 5.26, -21.70), (-0.07, 5.26, -21.71), (-0.12, 5.26, -21.72), (-0.17, 5.26, -21.75), (-0.21, 5.26, -21.77), (-0.26, 5.27, -21.80), (-0.23, 5.31, -21.78), (-0.20, 5.34, -21.75), (-0.16, 5.37, -21.74), (-0.12, 5.40, -21.72),");
            var carre = Vector3Parser.ParseVector3List(
                "(-0.15, 5.69, -21.83), (-0.17, 5.65, -21.80), (-0.18, 5.60, -21.78), (-0.19, 5.55, -21.76), (-0.19, 5.50, -21.75), (-0.20, 5.45, -21.74), (-0.20, 5.40, -21.73), (-0.20, 5.35, -21.73), (-0.20, 5.30, -21.73), (-0.19, 5.25, -21.74), (-0.19, 5.20, -21.75), (-0.14, 5.20, -21.73), (-0.09, 5.19, -21.71), (-0.04, 5.19, -21.70), (0.02, 5.19, -21.69), (0.07, 5.19, -21.69), (0.13, 5.19, -21.70), (0.18, 5.20, -21.70), (0.24, 5.20, -21.72), (0.29, 5.20, -21.73), (0.34, 5.19, -21.77), (0.39, 5.19, -21.79), (0.43, 5.19, -21.82), (0.46, 5.19, -21.86), (0.44, 5.22, -21.82), (0.43, 5.27, -21.80), (0.42, 5.32, -21.79), (0.41, 5.38, -21.78), (0.41, 5.43, -21.78), (0.39, 5.48, -21.79), (0.38, 5.54, -21.80), (0.36, 5.59, -21.81), (0.34, 5.64, -21.83), (0.33, 5.68, -21.85), (0.29, 5.70, -21.83), (0.24, 5.69, -21.81), (0.19, 5.69, -21.79), (0.14, 5.69, -21.78), (0.09, 5.69, -21.78), (0.03, 5.69, -21.77), (-0.02, 5.69, -21.78), (-0.07, 5.69, -21.79), (-0.12, 5.69, -21.81),");
            var eclair2 = Vector3Parser.ParseVector3List(
                "(0.12, 5.65, -21.76), (0.09, 5.60, -21.73), (0.05, 5.57, -21.72), (0.02, 5.53, -21.71), (-0.01, 5.49, -21.71), (-0.03, 5.45, -21.70), (-0.05, 5.40, -21.70), (-0.07, 5.35, -21.70), (-0.11, 5.32, -21.72), (-0.06, 5.32, -21.70), (-0.01, 5.33, -21.69), (0.06, 5.33, -21.68), (0.11, 5.34, -21.68), (0.16, 5.34, -21.68), (0.15, 5.29, -21.69), (0.13, 5.24, -21.69), (0.11, 5.19, -21.70), (0.08, 5.14, -21.72), (0.07, 5.09, -21.74), (0.04, 5.05, -21.76), (0.02, 5.01, -21.79), (0.01, 4.98, -21.82),");
            var infinity3 = Vector3Parser.ParseVector3List(
                "(-0.21, 5.32, -21.77), (-0.22, 5.37, -21.77), (-0.22, 5.43, -21.77), (-0.20, 5.47, -21.77), (-0.16, 5.51, -21.76), (-0.11, 5.53, -21.75), (-0.07, 5.54, -21.73), (-0.02, 5.53, -21.72), (0.02, 5.50, -21.70), (0.06, 5.46, -21.69), (0.10, 5.42, -21.68), (0.13, 5.38, -21.68), (0.16, 5.34, -21.68), (0.21, 5.32, -21.69), (0.25, 5.30, -21.70), (0.30, 5.28, -21.72), (0.36, 5.28, -21.74), (0.40, 5.29, -21.77), (0.45, 5.31, -21.80), (0.49, 5.33, -21.82), (0.51, 5.38, -21.84), (0.51, 5.43, -21.85), (0.48, 5.48, -21.84), (0.45, 5.51, -21.82), (0.41, 5.52, -21.79), (0.36, 5.52, -21.76), (0.31, 5.50, -21.74), (0.27, 5.48, -21.72), (0.22, 5.46, -21.70), (0.17, 5.44, -21.69), (0.12, 5.40, -21.68), (0.07, 5.38, -21.68), (0.02, 5.36, -21.68), (-0.03, 5.35, -21.69), (-0.08, 5.34, -21.71), (-0.12, 5.33, -21.72), (-0.17, 5.35, -21.74),");

            List<Vector3>[] shapes = { eclair, triangle, triangle2, infinity, infinity2, spirale, triangle3, carre, eclair2, infinity3 };
            SpellType[] shapesIndexes = { Lightning, Triangle, Triangle, SpellType.Infinity, 
                SpellType.Infinity, Spiral, Triangle, Square, Lightning, SpellType.Infinity};


            int counterCorrect = 0;
            for (int i = 0; i < shapes.Length; i++)
            {
                var shapeIndex = shapesIndexes[i];
                var i1 = i;
                detector.DetectSpell(shapes[i], new Vector3(0, 0, -10000000),(detected, score) =>
                {
                    Debug.Log("i:" + i1 + " detected:" + detected + " score:" + score);
                    if (detected == shapeIndex)
                    {
                        counterCorrect++;
                    }
                });
            }
            
            Assert.AreEqual(shapes.Length, counterCorrect);
        }
    }
}